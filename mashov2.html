<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××©×•×‘ 2 â€” ×˜×›× ×•×“×¢</title>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --pink: #E6007E; --teal: #00B4C5; --orange: #F39200;
            --purple: #6D3078; --blue: #0080C9; --green: #78B82A;
            --yellow: #FDC300; --dark: #122231;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Heebo', sans-serif; background: #f8f9fc; color: var(--dark); min-height: 100vh; overflow-x: hidden; }

        .bg-logo { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 92vmin; height: 92vmin; z-index: 0; pointer-events: none; opacity: 0.28; }
        .bg-logo svg { width: 100%; height: 100%; }
        .bg-logo .logo-part { transition: fill 0.8s ease; }

        .container { position: relative; z-index: 1; max-width: 480px; margin: 0 auto; padding: 20px 16px 48px; }

        .header { text-align: center; margin-bottom: 28px; animation: fadeUp 0.6s ease-out; }
        .header .logo { width: 90px; margin-bottom: 12px; filter: drop-shadow(0 2px 8px rgba(0,0,0,0.1)); }
        .header h1 { font-size: 1.5rem; font-weight: 900; background: linear-gradient(135deg, var(--teal), var(--green)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 4px; }
        .header .subtitle { font-size: 0.85rem; color: #888; font-weight: 300; }

        .intro-card { background: linear-gradient(135deg, var(--green), var(--teal)); color: white; border-radius: 20px; padding: 22px 20px; margin-bottom: 20px; text-align: center; position: relative; overflow: hidden; animation: fadeUp 0.6s ease-out 0.1s both; }
        .intro-card::before { content:''; position:absolute; top:-30px; right:-30px; width:100px; height:100px; background:rgba(255,255,255,0.1); border-radius:50%; }
        .intro-card .emoji { font-size: 1.8rem; margin-bottom: 6px; animation: bounce 2s ease-in-out infinite; }
        .intro-card p { font-size: 0.9rem; line-height: 1.6; position: relative; z-index: 1; }
        @keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-6px)} }

        .question-card { background: rgba(255,255,255,0.93); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-radius: 20px; padding: 22px 18px; box-shadow: 0 4px 20px rgba(0,0,0,0.06); margin-bottom: 14px; animation: fadeUp 0.5s ease-out both; transition: box-shadow 0.3s; }
        .question-card.error { box-shadow: 0 4px 20px rgba(230,0,126,0.25); border: 2px solid var(--pink); }

        .question-card:nth-child(1){animation-delay:.15s} .question-card:nth-child(2){animation-delay:.22s}
        .question-card:nth-child(3){animation-delay:.29s} .question-card:nth-child(4){animation-delay:.36s}
        .question-card:nth-child(5){animation-delay:.43s} .question-card:nth-child(6){animation-delay:.50s}

        .question-header { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 16px; }
        .q-badge { width: 28px; height: 28px; border-radius: 50%; color: white; font-size: 0.8rem; font-weight: 700; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px; }
        .q-badge-1{background:var(--teal)} .q-badge-2{background:var(--blue)} .q-badge-3{background:var(--purple)} .q-badge-4{background:var(--orange)} .q-badge-5{background:var(--green)} .q-badge-6{background:var(--pink)}
        .question-card h2 { font-size: 1rem; font-weight: 700; line-height: 1.55; color: var(--dark); }

        .star-rating { display: flex; justify-content: center; gap: 6px; direction: rtl; margin-top: 4px; }
        .star { font-size: 2.4rem; cursor: pointer; transition: all 0.18s ease; color: #ddd; -webkit-tap-highlight-color: transparent; user-select: none; }
        .star:hover, .star.hovered { transform: scale(1.2); }
        .star.active { animation: starPop 0.3s ease-out; }
        @keyframes starPop { 0%{transform:scale(1)} 50%{transform:scale(1.35)} 100%{transform:scale(1.1)} }
        .star-label { text-align: center; margin-top: 8px; font-size: 0.82rem; color: #aaa; min-height: 18px; transition: color 0.2s; }
        .star-label.visible { color: var(--dark); font-weight: 600; }

        .option-group { display: flex; flex-direction: column; gap: 8px; }
        .option-btn { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border: 2px solid #eee; border-radius: 12px; background: white; cursor: pointer; transition: all 0.22s; font-family: 'Heebo', sans-serif; font-size: 0.92rem; -webkit-tap-highlight-color: transparent; width: 100%; text-align: right; }
        .option-btn:active { transform: scale(0.97); }
        .circle { width: 20px; height: 20px; border-radius: 50%; border: 2px solid #ddd; transition: all 0.22s; flex-shrink: 0; position: relative; }
        .option-btn.selected { border-color: var(--teal); background: rgba(0,180,197,0.05); }
        .option-btn.selected .circle { border-color: var(--teal); background: var(--teal); }
        .option-btn.selected .circle::after { content:'\2713'; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:white; font-size:0.65rem; font-weight:bold; }

        .text-input { width: 100%; min-height: 110px; padding: 14px; border: 2px solid #eee; border-radius: 12px; font-family: 'Heebo', sans-serif; font-size: 0.92rem; resize: vertical; outline: none; line-height: 1.6; transition: border-color 0.3s; }
        .text-input:focus { border-color: var(--teal); }
        .text-input::placeholder { color: #ccc; }
        .char-count { text-align: left; font-size: 0.72rem; color: #bbb; margin-top: 5px; }

        .submit-area { margin-top: 8px; animation: fadeUp 0.5s ease-out 0.55s both; }
        .error-msg { color: var(--pink); font-size: 0.85rem; text-align: center; margin-bottom: 12px; display: none; animation: shake 0.4s ease; }
        .error-msg.show { display: block; }
        @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-6px)} 75%{transform:translateX(6px)} }
        .btn-submit { width: 100%; padding: 16px; border: none; border-radius: 16px; font-family: 'Heebo', sans-serif; font-size: 1.1rem; font-weight: 900; cursor: pointer; background: linear-gradient(135deg, var(--green), var(--teal)); color: white; box-shadow: 0 6px 20px rgba(120,184,42,0.35); transition: all 0.25s; -webkit-tap-highlight-color: transparent; }
        .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(120,184,42,0.45); }
        .btn-submit:active { transform: scale(0.97); }
        .btn-submit:disabled { opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: none; }

        .thank-you { display: none; text-align: center; padding: 50px 20px; animation: fadeUp 0.6s ease-out; }
        .thank-you.active { display: block; }
        .thank-you .big-emoji { font-size: 4rem; margin-bottom: 16px; animation: bounce 1.5s ease-in-out infinite; }
        .thank-you h2 { font-size: 2rem; font-weight: 900; background: linear-gradient(135deg, var(--green), var(--teal)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 12px; }
        .thank-you p { font-size: 1rem; color: #888; line-height: 1.7; }
        .heart { display: inline-block; animation: heartbeat 1.2s ease-in-out infinite; }
        @keyframes heartbeat { 0%,100%{transform:scale(1)} 15%{transform:scale(1.15)} 30%{transform:scale(1)} 45%{transform:scale(1.1)} }

        .confetti-piece { position: fixed; z-index: 100; border-radius: 2px; animation: confettiFall linear forwards; pointer-events: none; }
        @keyframes confettiFall { 0%{opacity:1;transform:translateY(0) rotate(0deg)} 100%{opacity:0;transform:translateY(100vh) rotate(720deg)} }
        @keyframes fadeUp { from{opacity:0;transform:translateY(18px)} to{opacity:1;transform:translateY(0)} }

        @media(max-width:380px){ .star{font-size:2rem} .question-card h2{font-size:0.92rem} }
    </style>
</head>
<body>

    <div class="bg-logo" id="bgLogo">
        <svg viewBox="0 0 220 215" xmlns="http://www.w3.org/2000/svg">
            <circle class="logo-part" id="lp-head" cx="110" cy="18" r="10"/>
            <rect class="logo-part" id="lp-arm-l" x="-8" y="-36" width="16" height="72" rx="8" transform="translate(82,60) rotate(-42)"/>
            <rect class="logo-part" id="lp-arm-r" x="-8" y="-36" width="16" height="72" rx="8" transform="translate(138,60) rotate(42)"/>
            <rect class="logo-part" id="lp-hand-l" x="-32" y="-8" width="64" height="16" rx="8" transform="translate(48,102)"/>
            <rect class="logo-part" id="lp-hand-r" x="-32" y="-8" width="64" height="16" rx="8" transform="translate(172,102)"/>
            <rect class="logo-part" id="lp-leg-l" x="-8" y="-46" width="16" height="92" rx="8" transform="translate(82,157) rotate(32)"/>
            <rect class="logo-part" id="lp-leg-r" x="-8" y="-46" width="16" height="92" rx="8" transform="translate(138,157) rotate(-32)"/>
        </svg>
    </div>

    <div class="container">

        <div class="header">
            <img src="logo.png" alt="×˜×›× ×•×“×¢" class="logo">
            <h1>××©×•×‘ â€” ×ª×•×›×Ÿ ×•×”×“×¨×›×”</h1>
            <div class="subtitle">×—×•×•×™×™×ª ×¤×¢×™×œ×•×ª ×•×ª×•×›×Ÿ</div>
        </div>

        <div class="intro-card">
            <div class="emoji">ğŸ¯</div>
            <p>×“×¢×ª×š ×¢×•×–×¨×ª ×œ× ×• ×œ×”×©×ª×¤×¨!<br>× ×©××— ×œ×©××•×¢ ××™×š ×”×™×™×ª×” ×—×•×•×™×™×ª ×”×¤×¢×™×œ×•×ª ×•×”×ª×•×›×Ÿ.</p>
        </div>

        <div id="formArea">

            <!-- Q1 -->
            <div class="question-card" id="card-q1">
                <div class="question-header">
                    <div class="q-badge q-badge-1">1</div>
                    <h2>×¢×“ ×›××” × ×”× ×™×ª ××”×¤×¢×™×œ×•×™×•×ª / ×”×ª×¢×¨×•×›×•×ª?</h2>
                </div>
                <div class="star-rating" data-name="q1">
                    <span class="star" data-value="1">â˜…</span>
                    <span class="star" data-value="2">â˜…</span>
                    <span class="star" data-value="3">â˜…</span>
                    <span class="star" data-value="4">â˜…</span>
                    <span class="star" data-value="5">â˜…</span>
                </div>
                <div class="star-label" id="label-q1"></div>
            </div>

            <!-- Q2 -->
            <div class="question-card" id="card-q2">
                <div class="question-header">
                    <div class="q-badge q-badge-2">2</div>
                    <h2>×”×× ×”×¤×¢×™×œ×•×ª ×ª×¨××” ×œ×”×‘× ×ª×š ×¢×œ ×”× ×•×©× / ×œ××“×ª ××©×”×• ×—×“×©?</h2>
                </div>
                <div class="option-group" data-name="q2">
                    <button class="option-btn" data-value="×××•×“" onclick="selectOption(this)"><span class="circle"></span><span>×××•×“ ğŸŒŸ</span></button>
                    <button class="option-btn" data-value="×‘××™×“×” ××¡×•×™××ª" onclick="selectOption(this)"><span class="circle"></span><span>×‘××™×“×” ××¡×•×™××ª ğŸ‘</span></button>
                    <button class="option-btn" data-value="×œ× ×›×œ ×›×š" onclick="selectOption(this)"><span class="circle"></span><span>×œ× ×›×œ ×›×š ğŸ¤”</span></button>
                    <button class="option-btn" data-value="×œ×" onclick="selectOption(this)"><span class="circle"></span><span>×œ× ğŸ“</span></button>
                </div>
            </div>

            <!-- Q3 -->
            <div class="question-card" id="card-q3">
                <div class="question-header">
                    <div class="q-badge q-badge-3">3</div>
                    <h2>×”×× ×”×”×¡×‘×¨×™× ×©×œ ×”××“×¨×™×š ×”×™×• ×‘×¨×•×¨×™× ×•××•×‘× ×™×?</h2>
                </div>
                <div class="option-group" data-name="q3">
                    <button class="option-btn" data-value="×›×Ÿ, ×××•×“" onclick="selectOption(this)"><span class="circle"></span><span>×›×Ÿ, ×××•×“ ğŸŒŸ</span></button>
                    <button class="option-btn" data-value="×›×Ÿ, ×“×™" onclick="selectOption(this)"><span class="circle"></span><span>×›×Ÿ, ×“×™ ğŸ‘</span></button>
                    <button class="option-btn" data-value="×—×œ×§×™×ª" onclick="selectOption(this)"><span class="circle"></span><span>×—×œ×§×™×ª ğŸ¤”</span></button>
                    <button class="option-btn" data-value="×œ×" onclick="selectOption(this)"><span class="circle"></span><span>×œ× ğŸ“</span></button>
                </div>
            </div>

            <!-- Q4 -->
            <div class="question-card" id="card-q4">
                <div class="question-header">
                    <div class="q-badge q-badge-4">4</div>
                    <h2>×‘××™×“×” ×•×¨×œ×•×•× ×˜×™ â€” ×”×× ×”×¤×¢×™×œ×•×ª ×ª×××” ××ª ×’×™×œ××™ ×”×™×œ×“×™×?</h2>
                </div>
                <div class="option-group" data-name="q4">
                    <button class="option-btn" data-value="×ª×××” ×××•×“" onclick="selectOption(this)"><span class="circle"></span><span>×ª×××” ×××•×“ ğŸŒŸ</span></button>
                    <button class="option-btn" data-value="×›×Ÿ, ×“×™" onclick="selectOption(this)"><span class="circle"></span><span>×›×Ÿ, ×“×™ ğŸ‘</span></button>
                    <button class="option-btn" data-value="×—×œ×§×™×ª" onclick="selectOption(this)"><span class="circle"></span><span>×—×œ×§×™×ª ğŸ¤”</span></button>
                    <button class="option-btn" data-value="×œ× ×ª×××”" onclick="selectOption(this)"><span class="circle"></span><span>×œ× ×ª×××” ğŸ“</span></button>
                </div>
            </div>

            <!-- Q5 -->
            <div class="question-card" id="card-q5">
                <div class="question-header">
                    <div class="q-badge q-badge-5">5</div>
                    <h2>×‘××™×“×” ×•×¨×œ×•×•× ×˜×™ â€” ×¢×“ ×›××” ×”×¤×¢×™×œ×•×ª ×”×™×™×ª×” ××¢× ×™×™× ×ª ×•×‘×¨×•×¨×” ×œ×™×œ×“×™×?</h2>
                </div>
                <div class="star-rating" data-name="q5">
                    <span class="star" data-value="1">â˜…</span>
                    <span class="star" data-value="2">â˜…</span>
                    <span class="star" data-value="3">â˜…</span>
                    <span class="star" data-value="4">â˜…</span>
                    <span class="star" data-value="5">â˜…</span>
                </div>
                <div class="star-label" id="label-q5"></div>
            </div>

            <!-- Q6 -->
            <div class="question-card" id="card-q6">
                <div class="question-header">
                    <div class="q-badge q-badge-6">6</div>
                    <h2>××” ×”×›×™ ××”×‘×ª ×‘×¤×¢×™×œ×•×ª? ××” ×”×™×™×ª ××©×¤×¨?</h2>
                </div>
                <textarea class="text-input" id="q6-text" placeholder="× ×©××— ×œ×©××•×¢ ××ª ×“×¢×ª×š... (×œ× ×—×•×‘×”)" maxlength="500" oninput="document.getElementById('charCount').textContent=this.value.length"></textarea>
                <div class="char-count"><span id="charCount">0</span> / 500</div>
            </div>

            <div class="submit-area">
                <div class="error-msg" id="errorMsg">× × ×œ×¢× ×•×ª ×¢×œ ×›×œ ×”×©××œ×•×ª ×”××¡×•×× ×•×ª</div>
                <button class="btn-submit" onclick="submitForm()">×©×œ×™×—×ª ×”××©×•×‘ âœ¨</button>
            </div>

        </div>

        <div class="thank-you" id="thankYou">
            <div class="big-emoji">ğŸ‰</div>
            <h2>×ª×•×“×” ×¨×‘×”!</h2>
            <p>×”××©×•×‘ ×©×œ×š ×”×ª×§×‘×œ ×‘×”×¦×œ×—×”.<br>×× ×—× ×• ×‘×˜×›× ×•×“×¢ ×¢×•×‘×“×™× ×›×œ ×”×–××Ÿ ×œ×”×©×ª×¤×¨,<br>×•×”××©×•×‘ ×©×œ×š ×¢×•×–×¨ ×œ× ×• ×××•×“ <span class="heart">â¤ï¸</span></p>
        </div>

    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";
        const app = initializeApp({
            apiKey: "AIzaSyBQ82MgwWCmMaEQQbyCKc_O2sA4i3tJ8ZI",
            authDomain: "forme-a3c26.firebaseapp.com",
            databaseURL: "https://forme-a3c26-default-rtdb.firebaseio.com",
            projectId: "forme-a3c26",
            storageBucket: "forme-a3c26.firebasestorage.app",
            messagingSenderId: "1026375487564",
            appId: "1:1026375487564:web:6a275bacad937a283ba4e9"
        });
        const db = getDatabase(app);
        window.submitToFirebase = async (data) => {
            try { await push(ref(db, 'mevakrim/mashov2'), data); return true; }
            catch(e) { console.error(e); return false; }
        };
    </script>

    <script>
        const answers = {};
        const starColors = {1:'#EF5350',2:'#FF7043',3:'#FFA726',4:'#66BB6A',5:'#26A69A'};
        const starLabels = {1:'×‘×›×œ×œ ×œ×',2:'××¢×˜',3:'×‘×™× ×•× ×™',4:'×˜×•×‘ ×××•×“',5:'××¦×•×™×Ÿ!'};

        document.querySelectorAll('.star-rating').forEach(group => {
            const name = group.dataset.name;
            const stars = group.querySelectorAll('.star');
            const label = document.getElementById('label-' + name);
            stars.forEach(star => {
                star.addEventListener('click', () => {
                    const val = parseInt(star.dataset.value);
                    answers[name] = val;
                    stars.forEach(s => { s.style.color = parseInt(s.dataset.value) <= val ? starColors[val] : '#ddd'; });
                    label.textContent = starLabels[val];
                    label.classList.add('visible');
                    document.getElementById('card-' + name)?.classList.remove('error');
                });
                star.addEventListener('mouseenter', () => {
                    const val = parseInt(star.dataset.value);
                    stars.forEach(s => { if(parseInt(s.dataset.value) <= val) s.classList.add('hovered'); });
                });
                star.addEventListener('mouseleave', () => stars.forEach(s => s.classList.remove('hovered')));
            });
        });

        function selectOption(btn) {
            const group = btn.closest('.option-group');
            group.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            answers[group.dataset.name] = btn.dataset.value;
            document.getElementById('card-' + group.dataset.name)?.classList.remove('error');
        }

        const logoParts = ['lp-head','lp-arm-l','lp-arm-r','lp-hand-l','lp-hand-r','lp-leg-l','lp-leg-r'];
        const colorThemes = [
            ['#00B4C5','#78B82A','#0080C9','#6D3078','#FDC300','#E6007E','#F39200'],
            ['#78B82A','#F39200','#E6007E','#00B4C5','#0080C9','#FDC300','#6D3078'],
            ['#F39200','#6D3078','#FDC300','#78B82A','#E6007E','#0080C9','#00B4C5'],
            ['#6D3078','#E6007E','#00B4C5','#F39200','#78B82A','#0080C9','#FDC300'],
            ['#FDC300','#0080C9','#78B82A','#E6007E','#F39200','#6D3078','#00B4C5'],
            ['#E6007E','#00B4C5','#6D3078','#FDC300','#0080C9','#78B82A','#F39200'],
        ];
        let themeIdx = 0;
        function cycleLogoColors() {
            const c = colorThemes[themeIdx % colorThemes.length];
            logoParts.forEach((id,i) => { const el=document.getElementById(id); if(el) el.style.fill=c[i]; });
            themeIdx++;
        }
        cycleLogoColors();
        setInterval(cycleLogoColors, 3500);

        async function submitForm() {
            const required = ['q1','q2','q3','q4','q5'];
            const missing = required.filter(q => !answers[q]);
            if (missing.length) {
                missing.forEach(q => document.getElementById('card-' + q)?.classList.add('error'));
                const errMsg = document.getElementById('errorMsg');
                errMsg.classList.add('show');
                document.getElementById('card-' + missing[0]).scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }
            document.getElementById('errorMsg').classList.remove('show');

            const btn = document.querySelector('.btn-submit');
            btn.disabled = true; btn.textContent = '×©×•×œ×—...';

            const data = {
                timestamp: new Date().toISOString(),
                q1_enjoyment: answers.q1,
                q2_learned_something: answers.q2,
                q3_guide_clarity: answers.q3,
                q4_age_appropriate: answers.q4,
                q5_interesting_for_kids: answers.q5,
                q6_feedback: document.getElementById('q6-text').value.trim()
            };

            if (window.submitToFirebase) await window.submitToFirebase(data);

            document.getElementById('formArea').style.display = 'none';
            document.querySelector('.intro-card').style.display = 'none';
            document.getElementById('thankYou').classList.add('active');
            launchConfetti();
        }

        function launchConfetti() {
            const colors = ['#E6007E','#00B4C5','#F39200','#6D3078','#0080C9','#78B82A','#FDC300'];
            for (let i=0;i<70;i++) setTimeout(() => {
                const p = document.createElement('div');
                p.className = 'confetti-piece';
                p.style.cssText = `left:${Math.random()*100}vw;top:-10px;width:${Math.random()*8+5}px;height:${Math.random()*8+5}px;background:${colors[Math.floor(Math.random()*colors.length)]};border-radius:${Math.random()>.5?'50%':'2px'};animation-duration:${Math.random()*2+2}s`;
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 4000);
            }, i * 25);
        }
    </script>
</body>
</html>
